# Run type checking
echo "Running type checking..."
npm run typecheck

# Run lint-staged to check and fix staged files
echo "Running lint-staged..."
npx lint-staged

# Test MCP server build and startup
echo "Testing MCP server build..."
npm run test:mcp

# Run tests
echo "Running tests..."
npm test

# Alexandria validation
echo "Running Alexandria validation..."
npx alexandria validate-all --errors-only || {
  echo "❌ Alexandria validation failed (errors found)"
  echo "   Run 'alexandria validate-all' to see details"
  exit 1
}

echo "Running Alexandria lint..."
npx alexandria lint --errors-only || {
  echo "❌ Alexandria lint failed (errors found)"
  echo "   Run 'alexandria lint' to see details"
  exit 1
}