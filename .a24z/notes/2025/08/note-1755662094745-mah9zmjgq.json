{
  "note": "## Note Storage and Retrieval Architecture\n\nThe notes storage system uses a simple but robust JSON-based approach with atomic file operations and intelligent path handling.\n\n**Storage structure**:\n```json\n{\n  \"version\": 1,\n  \"notes\": [\n    {\n      \"id\": \"note-1234567890-abc123\",\n      \"note\": \"Markdown content...\",\n      \"directoryPath\": \"/path/to/repo/root\",\n      \"anchors\": [\"src/file.ts\", \"docs/README.md\"],\n      \"tags\": [\"architecture\", \"decision\"],\n      \"confidence\": \"high\",\n      \"type\": \"explanation\",\n      \"metadata\": {},\n      \"timestamp\": 1234567890\n    }\n  ]\n}\n```\n\n**Key features**:\n- **Atomic writes**: Uses temporary files and rename operations to prevent corruption\n- **Automatic ID generation**: Unique IDs with timestamp and random suffix\n- **Path normalization**: All paths stored relative to repository root\n- **Metadata support**: Extensible metadata field for future enhancements\n\n**Retrieval patterns**:\n- **By repository**: All notes for a specific repository\n- **By anchors**: Notes linked to specific files/directories\n- **By tags**: Notes with specific tags\n- **By type**: Notes of specific types (decision, pattern, gotcha, explanation)\n\n**Performance considerations**:\n- **In-memory loading**: Notes are loaded into memory on first access\n- **Lazy initialization**: `.a24z` directory created only when needed\n- **Error resilience**: Graceful fallbacks for corrupted or missing files\n\n**Files involved**:\n- `src/core-mcp/store/notesStore.ts` - Core storage logic\n- `src/core-mcp/types/index.ts` - Note type definitions\n\n**Tags**: storage, architecture, data-flow, performance",
  "directoryPath": "/Users/griever/Developer/a24z-Memory",
  "anchors": [
    "src/core-mcp/store/notesStore.ts",
    "src/core-mcp/types/index.ts"
  ],
  "tags": [
    "storage",
    "architecture",
    "data-flow",
    "performance"
  ],
  "confidence": "high",
  "type": "explanation",
  "metadata": {
    "toolVersion": "2.0.0",
    "createdBy": "create_repository_note_tool"
  },
  "id": "note-1755662094745-mah9zmjgq",
  "timestamp": 1755662094745
}